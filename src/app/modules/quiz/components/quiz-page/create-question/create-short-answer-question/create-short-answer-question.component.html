<div class="container">
  <h3 class="title">Adding a Short Answer question</h3>
  <form [formGroup]="form" (submit)="onSubmit($event)">
    <app-collapsible-list>
      <app-collapsible-section [sectionId]="sectionIds[0]" [hasBorder]="false">
        <!-- Section dynamic title -->
        <span class="section-title" title>General</span>

        <!-- Section dynamic content -->
        <div class="content" content>
          @for(control of generalFormControls; track control.id) {
          <setting-row [label]="control.label" [id]="control.id">
            <app-form-field
              [control]="control"
              [controlName]="control.id"
              [form]="form"
              [showLabel]="false"
            />
          </setting-row>
          }
        </div>
      </app-collapsible-section>
      <app-collapsible-section [sectionId]="sectionIds[1]" [hasBorder]="false">
        <!-- Section dynamic title -->
        <span class="section-title" title>Answer</span>

        <!-- Section dynamic content -->
        <div class="content" content>
          @for(controls of answerFormControls; track controls; let i = $index) {
          <div class="answer-section">
            <h4 class="answer-title">Answer {{ i + 1 }}</h4>
            <div class="answer-row">
              <setting-row [label]="controls[0].label" [id]="controls[0].id" class="answer-input">
                <app-form-field
                  [control]="controls[0]"
                  [controlName]="controls[0].id"
                  [form]="getFormGroupFromForm(i)"
                  [showLabel]="false"
                />
              </setting-row>
              <setting-row [label]="controls[1].label" [id]="controls[1].id" class="grade-percent">
                <app-form-field
                  [control]="controls[1]"
                  [controlName]="controls[1].id"
                  [form]="getFormGroupFromForm(i)"
                  [showLabel]="false"
                />
              </setting-row>
            </div>
            <setting-row [label]="controls[2].label" [id]="controls[2].id">
              <app-form-field
                [control]="controls[2]"
                [controlName]="controls[2].id"
                [form]="getFormGroupFromForm(i)"
                [showLabel]="false"
              />
            </setting-row>
          </div>
          }
        </div>
      </app-collapsible-section>
    </app-collapsible-list>
    <div class="action-container">
      <app-button
        type="button"
        label="Add acceptable answer"
        variant="ghost"
        (onClick)="addQuestionChoice()"
      />
      <app-button
        type="button"
        label="Remove answer"
        variant="ghost"
        (onClick)="removeQuestionChoice()"
      />
      <app-button
        type="button"
        label="Cancel"
        variant="secondary"
        (onClick)="onCancel()"
      />
      <app-button
        type="submit"
        label="Save"
        class="submit-button"
        [loading]="loading"
      />
    </div>
  </form>
</div>
