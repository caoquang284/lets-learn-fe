<card>
  <div class="meeting-info">
    <div class="meeting-date-section">
      <span class="date-label">Open:</span>
      <span class="date-value">{{
        formatDate(meetingOpenDate, "EEEE, dd MMMM yyyy HH:mm a")
      }}</span>
    </div>
    
    <div class="meeting-description-section">
      <div class="description-content">
        <p>{{ meetingDescription || 'No description available' }}</p>
      </div>
    </div>

    <div class="meeting-actions" *ngIf="meetingOpenDate">
      <button 
        class="join-btn" 
        (click)="joinMeeting()" 
        [disabled]="isJoining"
      >
        <span *ngIf="!isJoining">Join</span>
        <span *ngIf="isJoining" class="joining-text">
          <span class="spinner-small"></span>
          Joining...
        </span>
      </button>
    </div>
  </div>
</card>

<card>
  <div class="comments-header">
    <span class="material-symbols-outlined">group</span>
    <h3>Class comments</h3>
  </div>

  <div class="meeting-comments-list">
    @for(comment of comments; track comment.id) {
      <div class="meeting-comment">
        <img [src]="getAvatar(comment)" class="avatar" [alt]="getAuthorName(comment) + ' avatar'">
        <div class="comment-content">
          <div class="comment-header">
            <strong class="author">{{ getAuthorName(comment) }}</strong>
            <span class="timestamp">{{ formatDate(comment.createdAt, 'MM/dd/yyyy HH:mm a') }}</span>
          </div>
          <p class="comment-text">{{ comment.text }}</p>
        </div>
      </div>
    }
  </div>
  
  <div class="meeting-comment-input">
    <div class="input-container">
      <img [src]="getCurrentUserAvatar()" class="avatar current-user" [alt]="(currentUser?.username || 'You') + ' avatar'">
      <input 
        type="text" 
        [(ngModel)]="newCommentText"
        placeholder="Add class comment..." 
        (keyup.enter)="addComment()"
        class="comment-input-field"
      >
      <button 
        class="send-btn" 
        (click)="addComment()" 
        [disabled]="!newCommentText.trim()"
      >
        <span class="material-symbols-outlined">send</span>
      </button>
    </div>
  </div>
</card>
